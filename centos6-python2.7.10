FROM centos:centos6
#comes with python/2.7.5
MAINTAINER Nathaniel Watson <nathankw@stanford.edu>
#RUN yum update -y && yum install -y wget git gcc unzip gcc-c++ zlib-devel openssl-devel sqlite-devel bzip2-devel ncurses-devel lapack-dev blas-dev
RUN yum update -y && yum groupinstall -y 'Development Tools' && yum install -y wget \
	bzip2-devel \
	lapack-dev blas-dev \
	ncurses-devel \
	openssl-devel \
	sqlite-devel \
	zlib-devel \
#lapack-dev blas-dev for installing scipy in Python
#Development Tools installs 28 packages, and their dependencies. The number of dependencies installed on a base image of centos:centos6 were 101, notably of which are Perl v5.10.1, git v1.7.1, unzip
RUN mkdir /srv/software
#gcc-c++ needed for running g++ to make tools, such as Bowtie2
#gcc needed for installing Python
RUN git clone https://github.com/nathankw/KNIFE.git /srv/software/knife && \
	cd /srv/software/knife && \	
	git remote add upstream https://github.com/lindaszabo/KNIFE.git && \
	git pull
RUN git clone https://github.com/nathankw/MACHETE.git /srv/software/machete && \
	cd /srv/software/machete && \
	git remote add upstream https://github.com/gillianhsieh/MACHETE && \
	git pull
#INSTALL Python 2.7.10
RUN mkdir -p /srv/src/Python /srv/software/Python && \
	cd /srv/src/Python && \
	wget https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz && \
	tar -zxf Python-2.7.10.tgz && \
	cd Python-2.7.10 && \
	./configure --prefix=/srv/software/Python && \
	make && \
	make install
ENV PATH=/srv/software/Python/bin:${PATH}
RUN	wget https://bootstrap.pypa.io/get-pip.py && \
	python get-pip.py && \
	pip install scipy && \
	pip install numpy
